/*! yajc.js 0.0.2, 2012-12-09
 *  https://github.com/buunguyen/yajc
 *  Copyright (c) 2012 Buu Nguyen
 *  Licensed under the Apache License, Version 2.0 */
(function(e){var t={supportTouch:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch},slice:function(e){return Array.prototype.slice.apply(e,Array.prototype.slice.call(arguments,1))},intVal:function(e){return parseInt(e,10)||0},is$:function(t){return t instanceof e},isUndefined:function(e){return typeof e=="undefined"}};e.each(["Array","Function","Number","String","Date","Arguments","RegExp"],function(e,n){t["is"+n]=function(e){return e!==null&&typeof e!="undefined"&&Object.prototype.toString.call(e)==="[object "+n+"]"}});var n={_slideList:function(e,t,n,r,i,s){if(n===r)return;var o=e.data("options").msPer100px,u=e.width()-t.outerWidth(!0);r=Math.min(0,Math.max(u,r));if(r===n)return;t.stop(!0,!1);var a=function(){e.trigger("yajc.slided",-r),s&&s()};o<=0?(t.css("left",r),a()):t.animate({left:r},{duration:Math.abs(r-n)*o/100,easing:i,queue:!1,complete:a})},init:function(n){return this.each(function(){var r=e(this).append('<div class="yajc"><ul></ul></div>');r.data("options",e.extend({},e.fn.yajc.defaults,n)),t.supportTouch()&&r.find(".yajc").addClass("touch"),e(window).resize(function(){r.yajc("refresh")}),r.yajc("refresh")})},add:function(n,r,i){return this.each(function(){var s=e(this),o=s.height(),u,a=s.find(".yajc > ul"),f=s.data("options").addDuration;t.is$(n)||(n=e(n)),t.isFunction(r)&&t.isUndefined(i)&&(i=r),t.isNumber(r)||(r=a.children().length),f>0&&n.hide(),r===0?(a.append(n),o===0&&(u=n.outerHeight(!0),s.height(u))):a.find("li:nth-child("+r+")").after(n);var l=function(){s.trigger("yajc.added",n[0]),s.yajc("refresh"),i&&i()};f>0?n.show(f,l):l()})},remove:function(n,r){return this.each(function(){var i=e(this),s=i.find(".yajc > ul"),o=i.data("options").removeDuration;t.isNumber(n)?n=s.find("li:nth-child("+(n+1)+")"):n instanceof e||(n=e(n));var u=function(){n.remove(),i.trigger("yajc.removed",n[0]),i.yajc("refresh"),r&&r()};o===0?u():n.hide(o,u)})},show:function(r,i){return this.each(function(){var s=e(this),o=s.find(".yajc > ul"),u=o.children(),a=s.width(),f=o.position().left,l=0,c,h;if(t.isString(r)){var p=/^(next|prev|previous)(\d+)?$/.exec(r);if(!p)return e.error("Invalid target"),!1;var d=p[1],v=t.intVal(p[2])||1;h=f,u.each(function(t){c=e(this).outerWidth(!0);if(h+c>=a/2)return d==="next"?r=Math.min(t+v,u.length-1):(h+c===a/2&&t++,r=Math.max(t-v,0)),!1;h+=c})}!t.isNumber(r)&&!t.is$(r)&&(r=e(r)),u.each(function(t){c=e(this).outerWidth(!0);if(t===r||this===r[0])return l+=a/2-c/2,n._slideList(s,o,f,l,s.data("options").showEasing,function(){s.trigger("yajc.shown",this),i&&i()}),!1;l-=c})})},slide:function(r,i){return this.each(function(){var s=e(this),o=s.find(".yajc > ul"),u=o.position().left;t.isString(r)?(r=e.trim(r),r.indexOf("+=")===0||r.indexOf("-=")===0?r=u+(r.indexOf("-=")===0?1:-1)*t.intVal(r.substring(2)):r=-t.intVal(r)):r=-r,n._slideList(s,o,u,r,s.data("options").slideEasing,i)})},canSlideLeft:function(){var t=e(this),n=t.find(".yajc > ul");return n.position().left<0},canSlideRight:function(){var t=e(this),n=t.find(".yajc > ul"),r=t.width()-n.outerWidth(!0);return n.position().left>r},stop:function(){return this.each(function(){e(this).find(".yajc > ul").stop(!0,!0)})},refresh:function(t){return this.each(function(){var r=e(this),i=r.width(),s=r.height(),o=r.find(".yajc > ul"),u=0,a=0,f,l;o.children().each(function(){var t=e(this),n=t.outerHeight(!0);u+=t.outerWidth(!0),a<n&&(a=n)}),s<a&&r.height(a),o.width(Math.max(i,u));var c=function(){r.trigger("yajc.refreshed"),t&&t()};l=o.position().left,f=o.outerWidth(!0)+l,f<i?n._slideList(r,o,l,l+(i-f),r.data("options").slideEasing,c):c()})}};e.fn.yajc=function(n){var r=e.fn.yajc.plugins;if(typeof n=="object"||!n)return r.init.apply(this,arguments);if(r[n])return r[n].apply(this,t.slice(arguments,1));e.error("Method "+n+" does not exist on jQuery.yajc")},e.fn.yajc.plugins={},e.each(n,function(t,n){if(t.indexOf("_")===0)return;e.fn.yajc.plugins[t]=n}),e.fn.yajc.defaults={addDuration:0,removeDuration:0,msPer100px:100,showEasing:"swing",slideEasing:"linear"},e.fn.yajc.plugins.selectOn=function(t,n,r){return this.each(function(){var n=e(this),r=r||!0,i=i||e.noop;n.find("li").live(t,function(t){var s=this,o=e(s);o.addClass("selected").siblings().removeClass("selected"),r?n.yajc("show",o,function(){i.call(s)}):i()})})},e.fn.yajc.plugins.hoverSlide=function(n){return this.each(function(){var r=e(this),i=r.find(".yajc > ul");i.mousemove(function(e){var s=r.width(),o=i.width()-s,u=r.offset().left+t.intVal(r.css("padding-left"))+t.intVal(r.css("margin-left"))+t.intVal(r.css("border-left")),a=e.pageX-u,f=a*o/s;r.yajc("stop").yajc("slide",f,n)})})},e.fn.yajc.plugins.wings=function(n){return this.each(function(){var r=e(this),i=r.find(".yajc > ul"),s=e('<a class="wing backward disabled" href="javascript:void(0)"><p>‹</p></a>'),o=e('<a class="wing forward disabled" href="javascript:void(0)"><p>›</p></a>'),u=s.add(o),a=t.supportTouch();n=e.extend({},{style:"pad",showOnHover:!0,snap:!1,step:1},n);var f=function(e){r.data("sliding")&&(n.snap?r.yajc("show",(e?"next":"prev")+n.step):r.yajc("slide","+="+(e?10:-10),function(){f(e)}))},l=function(){if(e(this).hasClass("disabled"))return;r.data("sliding",!0),n.snap&&r.yajc("stop"),e(this).addClass("on"),f(this===o[0])},c=function(){r.data("sliding",!1),n.snap||r.yajc("stop"),e(this).removeClass("on")};r.on("yajc.slided yajc.refreshed",function(){s[r.yajc("canSlideLeft")?"removeClass":"addClass"]("disabled"),o[r.yajc("canSlideRight")?"removeClass":"addClass"]("disabled")}),u.addClass(n.style).appendTo(r.find(".yajc")),n.showOnHover&&!a&&(u.hide(),r.hover(function(){u.stop(!0,!0).fadeIn()},function(){u.stop(!0,!0).fadeOut()})),n.snap||a?u.on(a?"touchstart":"mousedown",l).on(a?"touchend":"mouseup mouseout",c):u.hover(l,c)})}})(jQuery);